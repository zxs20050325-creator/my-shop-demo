# 冀遗筑梦 - 数字化非遗盲盒平台

## 项目简介
全球首个非遗盲盒平台，融合传统文化与现代电商体验。

## 最新更新 (V8.2+)
- **热销商品逻辑优化**: 修复了"首页"被错误统计为热销商品的问题
- **数据过滤增强**: 数据库函数现在会自动过滤非商品名称
- **行为追踪改进**: 前端不再将页面名称作为商品名称传递

## 部署说明

### 1. 数据库初始化
必须在Supabase控制台的SQL Editor中执行以下脚本：
- `backend/supabase-init.sql` - 创建表结构
- `backend/supabase-functions.sql` - 创建数据库函数（包含热销商品过滤逻辑）

### 2. 数据清理（可选）
如果已有错误数据，执行以下脚本清理：
- `backend/cleanup-non-product-logs.sql` - 清理非商品日志记录

### 3. 应用部署
- 前端文件位于 `frontend/` 目录
- 后端服务通过 `backend/index.js` 启动
- 确保环境变量正确配置

## 功能特性
- 非遗商品展示与购买
- 用户行为追踪与分析
- 管理员数据看板
- 实时统计与报表

## 技术栈
- 前端: HTML5, CSS3, JavaScript, Chart.js
- 后端: Node.js, Express
- 数据库: Supabase (PostgreSQL)
- 部署: Render

## 注意事项
- 热销商品统计现在只包含真实商品，排除了"首页"等页面名称
- 所有用户行为追踪应正确区分页面浏览和商品操作
- 定期检查数据库函数是否正常工作