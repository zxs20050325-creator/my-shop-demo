<script>
    function loadData() {
        // 添加调试日志
        console.log("开始加载数据...");

        // 模拟API请求（实际应替换为真实API调用）
        fetch('/api/admin/dashboard')
            .then(response => {
                if (!response.ok) {
                    throw new Error('网络响应错误: ' + response.status);
                }
                return response.json();
            })
            .then(data => {
                // 数据成功加载，更新UI
                console.log("数据加载成功:", data);
                updateDashboard(data);
            })
            .catch(error => {
                // 处理错误情况
                console.error("数据加载失败:", error);
                // 显示错误提示
                document.getElementById('error-message').textContent = '数据加载失败，请稍后重试';
                document.getElementById('error-message').style.display = 'block';
            });
    }

    // 页面加载完成后执行数据加载
    window.addEventListener('DOMContentLoaded', () => {
        loadData();
    });

    // 更新仪表板数据的函数
    function updateDashboard(data) {
        // 假设data包含以下字段
        document.getElementById('revenue').textContent = data.revenue || '0';
        document.getElementById('visits').textContent = data.visits || '0';
        document.getElementById('orders').textContent = data.orders || '0';
        document.getElementById('active-users').textContent = data.activeUsers || '0';

        // 更新图表数据（如果需要）
        updateCharts(data);
    }

    // 更新图表的函数
    function updateCharts(data) {
        // 这里可以添加图表更新逻辑
        console.log("更新图表数据...");
    }
</script>
